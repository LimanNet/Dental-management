<?php	/******************************************************************************/	/***						Tooth State function			                ***/	/***						Графика зубной формулы							***/	/******************************************************************************/		if($_GET['cat']=="toothstate"){$results['cat'] = "toothstate";}else{return;}		$results['link'] = "admin.php?action=catalog&cat=toothstate";	$results['sAct'] = isset($_GET['sAct']) ? $_GET['sAct'] : null ;	$results['res'] = isset($_GET['res']) ? $_GET['res'] : null ;	$results['GETid'] = isset($_GET['id']) ? $_GET['id'] : null ;	require_once ( CLASS_PATH . '/catalog/ToothState.php' );	// Весь список объектов	$list = new ToothState();	$results['list'] = $list->getAll();		if(isset($_GET['archive']) && $_GET['archive']=='on'){		$results['list'] = $list->archive();		$results['link'] .= "&archive=on";	}	// Выборка выбранного объекта	$results['ids'] = isset($_GET['id']) ? $_GET['id'] : null;	if($results['ids']){		foreach($results['list'] as $param=>$value){			foreach($value as $par=>$val){				if($par=='id'){					if($val==$results['ids']){						$results['id']=$value;					}				}			}		}	}		// Получение сторонних данных	require_once ( CLASS_PATH . '/catalog/ToothPart.php' );		$toothPart = new ToothPart();		$results['toothPart'] = $toothPart->getAll();		// Проверка действий	$sAct = isset($_GET['sAct']) ? $_GET['sAct'] : "";	switch($sAct){		case 'new':				$results[] = $results['link'];				$results[] = $results['cat'];				newObject($results);			break;		case 'insert':				insert($_REQUEST);			break;		case 'update':				update($_REQUEST);			break;		case 'delete':				delete($results['ids']);			break;		default:			if(isset($_REQUEST['hidden'])){				$results['list'] = null;				def($results);			}else{def($results);}				}	function def($results){		require_once ( TEMPLATE_PATH . '/catalog/toothstate.php' );	}	function newObject($results){		require_once ( TEMPLATE_PATH . '/catalog/toothstate.php' );	}	function insert($results){		$insert = new ToothState();				$insert->set($results);		$res =	$insert->insert();		header( "Location: admin.php?action=catalog&cat=toothstate&res=".$res );	}	function update($results){		$update = new ToothState();				$update->set($results);		$res =	$update->update();		header( "Location: admin.php?action=catalog&cat=toothstate&id=".$results['id']."&res=".$res );	}	function delete($id){		$delete = new ToothState();				$delete->setID($id);		$res =	$delete->delete();		header( "Location: admin.php?action=catalog&cat=toothstate&res=".$res );	}	?>